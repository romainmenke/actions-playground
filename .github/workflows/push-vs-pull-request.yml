name: push vs. pull request
on:
  push:
  pull_request:

jobs:
  push-vs-pull-request:
    name: push vs. pull request
    runs-on: ubuntu-latest
    steps:
    - run: echo "push vs. pull request"

    - name: check out
      uses: actions/checkout@v3.0.2
      with:
        fetch-depth: 1

    - run: git fetch

    - run: git --no-pager diff --name-only origin/main

    - run: git merge-base --fork-point origin/main

    - name: GITHUB_REF diff
      run: git --no-pager diff --name-only $GITHUB_REF $(git show-branch --merge-base)
      continue-on-error: true

    - name: HEAD diff
      run: git --no-pager diff --name-only HEAD $(git show-branch --merge-base)
      continue-on-error: true
